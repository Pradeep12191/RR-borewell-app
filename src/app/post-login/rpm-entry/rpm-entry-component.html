<div class="shift-top-30">
    <div fxLayout fxLayoutAlign="space-between">
        <div fxLayout fxFlex fxLayoutGap="16px" fxFlex="40">
            <mat-form-field class="calc-field" fxFlex="40">
                <mat-label>Vehicle</mat-label>
                <mat-select #vehicleSelect (selectionChange)="onVehicleChange()" [(ngModel)]="selectedVehicle" placeholder="Vehicle">
                    <mat-option [value]="vehicle" *ngFor="let vehicle of vehicles">{{ vehicle.regNo }}</mat-option>
                </mat-select>
            </mat-form-field>
            <div fxLayout="column" fxLayoutGap="5px">
                <div class="font-italic font-14 sub-title">Godown Delivery Pipe</div>
                <button (click)="assignVehicle()" mat-raised-button color="primary">
                    <mat-icon class="m-r-5">local_shipping</mat-icon>
                    Assign Vehicle
                </button>
            </div>
        </div>
        <div fxLayout fxLayoutAlign="center center" fxLayoutGap="16px" fxFlex="20">
            <div fxLayout fxLayoutGap="10px">
                <div fxFlex>Start</div>
                <div fxFlex>:</div>
                <div fxFlex class="bold">{{ (bookStartNo || bookStartNo == '0') ? bookStartNo : '-' }}</div>
            </div>
            <div fxLayout fxLayoutGap="10px">
                <div fxFlex>End</div>
                <div fxFlex>:</div>
                <div fxFlex class="bold">{{ (bookEndNo || bookEndNo == 0) ? bookEndNo : '-' }}</div>
            </div>
        </div>
        <div fxLayout fxLayoutAlign="end center" fxLayoutGap="16px">
            <div>
                <button #addBookBtn (click)="addBook()" mat-raised-button color="primary">Add New Book</button>
            </div>
            <div>
                <mat-checkbox color="primary" labelPosition="before">Rebore</mat-checkbox>
            </div>
        </div>
    </div>
    <div fxLayout fxLayoutAlign="space-between center">
        <div fxFlex="30"></div>
        <div fxlayout fxLayoutGap="25px" fxFlex="40" fxLayoutAlign="center center">
            <div fxLayout fxLayoutGap="5px" fxFlex>
                <div>RPM Entry no</div>
                <div>:</div>
                <div class="bold">{{ (rpmEntryNo || rpmEntryNo == 0) ? rpmEntryNo : '-'}}</div>
            </div>
            <mat-form-field floatLabel="always" (click)="picker.open()" class="calc-field" fxFlex>
                <mat-label>Date</mat-label>
                <input [(ngModel)]="date" #dateInput placeholder="Select Date" readonly matInput [matDatepicker]="picker">
                <mat-datepicker-toggle matSuffix [for]="picker"></mat-datepicker-toggle>
                <mat-datepicker #picker></mat-datepicker>
            </mat-form-field>
        </div>
        <div fxFlex="30" fxLayoutAlign="end">
            <button mat-raised-button color="primary">
                <mat-icon class="m-r-5">library_books</mat-icon>Report
            </button>
        </div>

    </div>
    <mat-card>
        <mat-card-content>
            <div class="pipe-header" fxLayout>
                <div fxFlex="20"></div>
                <div [fxFlex]="pipeFlex" fxLayoutAlign="center center" class="header-cell bold" *ngFor="let pipe of pipes">{{
                    pipe.type }}</div>
            </div>
            <form [formGroup]="form">
                <div class="table" fxLayout="column">
                    <div class="row" fxLayout>
                        <div fxFlex="20" fxLayoutAlign="start center" class="cell b-r-0 p-l-10 bold bg-grey">Previous
                            Stock
                            Feet</div>
                        <div [fxFlex]="pipeFlex" *ngFor="let previousStock of rpmEntry.previousStockFT; let last = last"
                            class="cell" [class.b-r-0]="!last"></div>
                    </div>
                    <div class="row" fxLayout>
                        <div fxFlex="20" fxLayoutAlign="start center" class="cell b-r-0 b-t-0 p-l-10 b-b-0 bold bg-grey">RR
                            Income</div>
                        <div [fxFlex]="pipeFlex" *ngFor="let rrIncome of rpmEntry.rrIncome; let last = last" class="cell b-t-0 b-b-0"
                            [class.b-r-0]="!last"></div>
                    </div>
                    <div class="row" fxLayout>
                        <div fxFlex="20" fxLayoutAlign="start center" class="cell b-r-0 p-l-10 b-b-0 bold bg-grey">MM
                            Income</div>
                        <div [fxFlex]="pipeFlex" *ngFor="let mmIncome of rpmEntry.mmIncome; let last = last" class="cell b-b-0"
                            [class.b-r-0]="!last"></div>
                    </div>
                    <div class="row" fxLayout>
                        <div fxFlex="20" fxLayoutAlign="start center" class="cell b-r-0 p-l-10 b-b-0 bold bg-grey">Vehicle
                            In Out
                        </div>
                        <div [fxFlex]="pipeFlex" *ngFor="let vehicleInOut of rpmEntry.vehicleInOut; let last = last"
                            class="cell b-b-0" [class.b-r-0]="!last"></div>
                    </div>
                    <div class="row" fxLayout>
                        <div fxFlex="20" fxLayoutAlign="start center" class="cell b-r-0 p-l-10 b-b-0 bold bg-grey">DamageFeet
                        </div>
                        <div [fxFlex]="pipeFlex" *ngFor="let damageFeet of rpmEntry.damageFeet; let last = last" class="cell b-b-0"
                            [class.b-r-0]="!last"></div>
                    </div>
                    <div class="row" fxLayout>
                        <div fxFlex="20" fxLayoutAlign="start center" class="cell b-r-0 p-l-10 b-b-0 bold bg-grey">Available
                            Stock</div>
                        <div [fxFlex]="pipeFlex" *ngFor="let availableStock of rpmEntry.availableStock; let last = last"
                            class="cell b-b-0" [class.b-r-0]="!last"></div>
                    </div>
                    <div class="row" fxLayout>
                        <div fxFlex="20" fxLayoutAlign="start center" class="cell b-r-0 p-l-10 b-b-0 bold bg-grey">Point
                            Expense Feet</div>
                        <div [fxFlex]="pipeFlex" fxLayoutAlign="center center" formArrayName="pointExpenseFeet" *ngFor="let ctrl of pointExpenseFeetFormArray.controls; let last = last"
                            class="cell b-b-0" [class.b-r-0]="!last">
                            <ng-container [formGroup]="ctrl">
                                <div class="input-wrapper h-100" fxFlex>
                                    <input type="text" class="h-100" formControlName="value" placeholder="Count"
                                        positiveNumber>
                                    <mat-icon class="input-edit-icon">edit</mat-icon>
                                    <!-- <label>Count</label> -->
                                    <span class="focus-border">
                                        <i></i>
                                    </span>
                                </div>
                            </ng-container>

                        </div>
                    </div>
                    <div class="row" fxLayout>
                        <div fxFlex="20" fxLayoutAlign="start center" class="cell b-r-0 p-l-10 bold bg-grey">Balance
                            Stock
                            Feet</div>
                        <div [fxFlex]="pipeFlex" *ngFor="let balanceStockFeet of rpmEntry.balanceStockFeet; let last = last"
                            class="cell" [class.b-r-0]="!last"></div>
                    </div>
                </div>
            </form>
            <div [formGroup]="form" fxLayout class="m-t-10">
                <mat-form-field [appearance]="appearance" fxFlex>
                    <mat-label>Remarks</mat-label>
                    <textarea formControlName="remarks" matInput cols="30" rows="6"></textarea>
                </mat-form-field>
            </div>
        </mat-card-content>
    </mat-card>
    <div fxLayoutAlign="end" class="m-t-25">
        <div>
            <button (click)="save()" mat-raised-button color="primary" type="button">SUBMIT</button>
        </div>
    </div>
</div>